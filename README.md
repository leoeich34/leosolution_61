# Отчёт по проведенному EDA (@nighaslayer)

## 1. Обзор и качество данных
1) Объём окна составил ~**7,483,766** строк и **23** колонок.
2) `amount_usd`: **False** (если `False` — суммы конвертировались из `amount` по историческим курсам).
3) Идентификатор клиента: **customer_id**, время: **timestamp**.

Топ‑10 по доле пропусков оказались следующими (все равняются доле 0.00%):
  - transaction_id
  - customer_id
  - card_number
  - timestamp
  - vendor_category
  - vendor_type
  - vendor
  - amount
  - currency
  - country

## 2. Суммы транзакций в USD
Гистограмма лежит в [amount_usd_hist.png]

## 3. Общий уровень фрода
`is_high_risk_vendor=True` показал, что fr≈20.00% (n=1,871,963) против False 19.96% (n=5,611,803).

### Топ по фроду среди категорий продавцов (vendor_category)
1. Restaurant: fr≈19.97% (n=936,178)
2. Healthcare: fr≈19.94% (n=936,770)

### Топ по фроду по типам продавцов (vendor_type)
1. physical: fr≈20.02% (n=935,039)
2. pharmacy: fr≈19.98% (n=468,377)
3. local: fr≈19.96% (n=467,902)
4. online: fr≈19.93% (n=1,401,650)
5. medical: fr≈19.90% (n=468,393)

### Статистика мошенничества по типам карт (card_type)
1. Basic Credit: fr≈19.97% (n=1,415,469)
2. Gold Credit: fr≈19.97% (n=1,447,260)
3. Premium Debit: fr≈19.97% (n=1,539,661)
4. Basic Debit: fr≈19.97% (n=1,548,363)
5. Platinum Credit: fr≈19.97% (n=1,533,013)

### Города
1. Топ по фроду. Здесь считаем без `Unknown City` и отсечены малые группы.
  1) Phoenix: fr≈7.53% (n=50,333)
  2) San Diego: fr≈7.49% (n=50,425)
  3) Dallas: fr≈7.28% (n=50,126)
2. Топ городов по **среднему чеку**:
  1) New York: mean≈568.9, median≈425.1, std≈619.8 (n=49805)
  2) San Antonio: mean≈567.9, median≈425.3, std≈635.2 (n=50079)
  3) San Jose: mean≈567.3, median≈424.0, std≈628.8 (n=50015)
  4) Phoenix: mean≈565.7, median≈421.4, std≈616.2 (n=50333)
  5) San Diego: mean≈565.6, median≈423.2, std≈612.2 (n=50425)
3. Бар‑чарт фрода по городам: [fraud_rate_bars_city.png]

## Время
- Самые «плотные» часы по объёму (top‑5): 18:00 (n=456,393), 08:00 (n=405,312), 12:00 (n=404,942), 19:00 (n=404,823), 17:00 (n=404,657)
- Распределение по часам: [time_hist_by_hour.png]

## Выводы с цифрами
Вывод 1: Фрод‑рейт в статических срезах (тип карты, категория, тип продавца, high‑risk flag) практически **ровный ≈20%**. Эти признаки по отдельности **не отделяют** фрод от нефрода в данном наборе.
Вывод 2: Суммы имеют длинный правый хвост; медианный чек значительно ниже p95/p99 → для правил/модели лучше использовать лог‑преобразование или биннинг.
Вывод 3: По городам различия по фроду минимальны; «Unknown City» выбивается и должен исключаться/нормализоваться до загрузки в модель.
Вывод 4: Наблюдается выраженная неравномерность по часам (пики в районе вечерних часов) — это повод для **временных фичей** и динамических порогов.

## Итоговые продуктовые гипотезы
1. Клиентов с высокой медианой `unique_merchants_last_1h`, т.е. выше 95‑го квантиля, стоит направлять в SCA/OTP. Можно ожидать увеличение Precision правил с минимальной корректировкой по Approval.
2. В «рискованные» часы следует снижать автопруф и/или поднимать скор‑порог. Это приведет к падению Fraud loss при стабильном Approval.
3. Резкая смена города/страны относительно истории клиента должна привести к его дополнительной проверке.
4. Повторяющиеся связки client↔vendor/IP из известных фрод‑кластеров должны стать аргументом для заноса в списки сомнения или в "блэклист".

## Итоговые технические гипотезы 
1. Можно провести Feature Store в реальном времени, взяв окна 1ч/24ч/7д, и добавить SLA обновления < 1 мин.
2. Следует внедрить следующие мониторинги: дрейф фичей (PSI/KS), фрод‑статистики по сегментам, сигналы на всплески в показаниях.
3. Data‑quality pipeline в упрощенном виде звучит так: проводим тесты на пропуски/диапазоны/дубликаты и затем валидируем справочники, например по городам, валютам.
